---
import Link from "./link.astro";
---

{/* Versión desktop - visible en sm y mayores */}
<nav class="hidden sm:flex gap-6 sm:gap-1">
  <Link href="#galeria" variant="secondary" className="nav-link font-newrock"
    >Galería</Link
  >
  <Link href="#discografia" className="nav-link font-newrock">Discografía</Link>
  <Link href="#eventos" variant="secondary" className="nav-link font-newrock"
    >Eventos</Link
  >

  <Link href="#biografia" variant="secondary" className="nav-link font-newrock"
    >Biografía</Link
  >
  <Link href="#contacto" variant="secondary" className="nav-link font-newrock"
    >Contacto</Link
  >
</nav>

<!-- Botón hamburguesa para móvil -->
<div class="sm:hidden">
  <button
    class="p-2"
    onclick="document.getElementById('sidebar-menu').classList.remove('-translate-x-full')"
  >
    <span class="text-white text-2xl">☰</span>
  </button>

  <!-- Barra lateral desde la izquierda -->
  <div
    id="sidebar-menu"
    class="fixed top-0 left-0 w-64 h-full bg-black/50 backdrop-blur-md z-50 transform -translate-x-full transition-transform duration-300 ease-in-out"
  >
    <button
      class="absolute top-4 right-4 text-white text-3xl"
      onclick="document.getElementById('sidebar-menu').classList.add('-translate-x-full')"
      >✕</button
    >
    <nav class="flex flex-col items-start gap-6 pt-16 px-8">
      <a
        href="#galeria"
        class="nav-link text-2xl text-white hover:text-yellow-500 transition-colors"
        onclick="document.getElementById('sidebar-menu').classList.add('-translate-x-full')"
        >Galería</a
      >
      <a
        href="#discografia"
        class="nav-link text-2xl text-white hover:text-yellow-500 transition-colors"
        onclick="document.getElementById('sidebar-menu').classList.add('-translate-x-full')"
        >Discografía</a
      >
      <a
        href="#eventos"
        class="nav-link text-2xl text-white hover:text-yellow-500 transition-colors"
        onclick="document.getElementById('sidebar-menu').classList.add('-translate-x-full')"
        >Eventos</a
      >

      <a
        href="#biografia"
        class="nav-link text-2xl text-white hover:text-yellow-500 transition-colors"
        onclick="document.getElementById('sidebar-menu').classList.add('-translate-x-full')"
        >Biografía</a
      >
      <a
        href="#contacto"
        class="nav-link text-2xl text-white hover:text-yellow-500 transition-colors"
        onclick="document.getElementById('sidebar-menu').classList.add('-translate-x-full')"
        >Contacto</a
      >
    </nav>
  </div>

  <!-- Overlay oscuro al abrir el menú -->
  <div
    id="sidebar-overlay"
    class="fixed inset-0 bg-black/50 z-40 hidden"
    onclick="document.getElementById('sidebar-menu').classList.add('-translate-x-full'); this.classList.add('hidden')"
  >
  </div>
</div>

<script>
  // Mejoramos la experiencia con un poco de JavaScript
  document.addEventListener("DOMContentLoaded", () => {
    const menu = document.getElementById("sidebar-menu");
    const overlay = document.getElementById("sidebar-overlay");

    if (menu && overlay) {
      // Observar cambios en la clase del menú
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.attributeName === "class") {
            if (menu.classList.contains("-translate-x-full")) {
              overlay.classList.add("hidden");
            } else {
              overlay.classList.remove("hidden");
            }
          }
        });
      });

      observer.observe(menu, { attributes: true });
    }
  });
</script>
